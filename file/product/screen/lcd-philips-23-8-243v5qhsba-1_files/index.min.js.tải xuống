/*!
 * EGANY Smart Search 1.2.1
 * Author: Tu.Nguyen
 * Last update: 20220916
 */!function(t){var n={};function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var i in t)e.d(r,i,function(n){return t[n]}.bind(null,i));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=1)}([function(t,n,e){t.exports=function(){"use strict";function t(){}function n(t){return t}function e(t){for(var n=arguments.length,e=1;1<n?e<n:e>n;1<n?e++:e--)for(var r in arguments[e])t[r]=arguments[e][r];return t}function r(t,n){function e(){}var r={}.hasOwnProperty;for(var i in e.prototype=n.prototype,t.prototype=new e,n)r.call(n,i)&&(t[i]=n[i]);return t}function i(t){return"undefined"!=typeof Symbol&&Symbol[t]?Symbol[t]:"undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol[t]=Symbol.for(t):"@@"+t}function o(t){this.value=t}function s(){this.id=++dt}function a(t){if(!(this instanceof a))return new a(t);s.call(this),this.value=t}function u(t){if(!(this instanceof u))return new u(t);a.call(this,t)}function c(){if(!(this instanceof c))return new c;s.call(this)}function h(t){if(!(this instanceof h))return new h(t);this.error=t,s.call(this)}function l(t){return new u(t)}function p(t){return new a(t)}function f(){return new c}function d(t){return t&&t._isEvent?t:p(t)}function g(t){if(yt.length&&!g.running)try{g.running=!0,yt.forEach((function(n){n(t)}))}finally{delete g.running}}function m(t,n,e){this.context=t,this.method=n,this.args=e}function y(t,n){var e=t||n;if(e&&e._isDesc)return t||n;for(var r=arguments.length,i=Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];return new m(t,n,i)}function v(t,n){return n.desc=t,n}function b(t){return ut(t)?pt.flatMap(b,t):ct(t)?[t]:(null!=t?t._isSource:void 0)?[t.obs]:[]}function w(t,n){this._subscribe=t,this._handleEvent=n,this.subscribe=pt.bind(this.subscribe,this),this.handleEvent=pt.bind(this.handleEvent,this),this.pushing=!1,this.ended=!1,this.prevError=void 0,this.unsubSrc=void 0,this.subscriptions=[],this.queue=[]}function x(t){return function(n){for(var e=arguments.length,r=Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];if("object"==typeof n&&r.length){var o=n,s=r[0];n=function(){return o[s].apply(o,arguments)},r=r.slice(1)}return t.apply(void 0,[n].concat(r))}}function E(t){return t=Array.prototype.slice.call(t),wt.apply(void 0,t)}function S(t,n){return function(){for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];return t.apply(void 0,n.concat(r))}}function A(t,n){var e=t.slice(1).split("."),r=pt.map(function(t){return function(n){return function(e){if(null!=e){var r=e[n];return pt.isFunction(r)?r.apply(e,t):r}}}}(n),e);return function(t){for(var n=0;n<r.length;n++)t=(0,r[n])(t);return t}}function _(t){return"string"==typeof t&&t.length>1&&"."===t.charAt(0)}function k(t,n){return wt.apply(void 0,[t].concat(n))}function $(t,n,e,r){if(n&&n._isProperty){var i=n.sampledBy(t,(function(t,n){return[t,n]}));return r.call(i,(function(t){return t[0]})).map((function(t){return t[1]}))}return n=k(n,e),r.call(t,n)}function T(t){if(pt.isFunction(t))return t;if(_(t)){var n=function(t){return t.slice(1)}(t);return function(t,e){return t[n](e)}}throw new Error("not a function or a field key: "+t)}function I(t){this.desc=t,this.id=++xt,this.initialDesc=this.desc}function N(t,n,e){w.call(this,n,e),this.property=t,this.subscribe=pt.bind(this.subscribe,this),this.current=ht,this.currentValueRootId=void 0,this.propertyEnded=!1}function B(t,n){return new C(t,M(ht,n))}function C(t,n,e){I.call(this,t),this.dispatcher=new N(this,n,e),g(this)}function L(t,n,e,r){if(!(this instanceof L))return new L(t,n,e);pt.isFunction(t)&&(e=n,n=t,t=St),r!==Et&&(n=function(t,n){var e=!1;return function(r){function i(){var t=o;o=null;for(var n=0;n<t.length;n++){var e=t[n];r(e)}}var o,s=bt.isInTransaction();e=!0;try{return n((function(n){if(!e&&!o)return r(n);o?o.push(n):(o=[n],s?bt.soonButNotYet(t,i):At.scheduler.setTimeout(i,0))}))}finally{e=!1}}}(this,n)),I.call(this,t),this.dispatcher=new w(n,e),g(this)}function M(n,e){return function(r){var i=!1,s=!1,a=t,c=mt,h=function(){if(!i)return n.forEach((function(n){if(i=!0,(c=r(new u(n)))===gt)return a(),a=t,t}))};return a=e((function(t){return t.hasValue?t.isInitial&&!s?(n=new o(t.value),mt):(t.isInitial||h(),i=!0,n=new o(t.value),r(t)):(t.isEnd&&(c=h()),c!==gt?r(t):void 0)})),s=!0,h(),a}}function O(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.unsubscribe=pt.bind(this.unsubscribe,this),this.unsubscribed=!1,this.subscriptions=[],this.starting=[];for(var n,e=0;e<t.length;e++)n=t[e],this.add(n)}function P(){return new L(y(At,"never"),(function(n){return n(f()),t}))}function W(n){return new C(new m(At,"constant",[n]),(function(e){return e(l(n)),e(f()),t}))}function H(t){for(var n=arguments.length,e=Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];return $(this,t,e,(function(t){return v(new m(this,"map",[t]),this.withHandler((function(n){return this.push(n.fmap(t))})))}))}function V(t,n){this.obs=t,this.sync=n,this.queue=[]}function q(){V.apply(this,arguments)}function D(t){V.call(this,t,!0)}function j(){return R(L,arguments)}function F(){return R(B,arguments)}function R(t,n){if(0===n.length)return P();var e=function(t){for(var n=t.length,e=[],r=[],i=0,o=[];i<n;){o[i]=t[i],o[i+1]=t[i+1];for(var s,a=pt.toArray(t[i]),u={f:z(t[i+1]),ixs:[]},c=!1,h=0;h<a.length;h++){s=a[h];var l=pt.indexOf(e,s);c||(c=V.isTrigger(s)),l<0&&(e.push(s),l=e.length-1);for(var p,f=0;f<u.ixs.length;f++)(p=u.ixs[f]).index===l&&p.count++;u.ixs.push({index:l,count:1})}a.length>0&&r.push(u),i+=2}return[e,r,o]}(n),r=e[0],i=e[1],o=e[2];if(!r.length)return P();r=pt.map(V.fromObservable,r);var s=pt.any(r,(function(t){return t.flatten}))&&function(t){function n(t){if(pt.contains(e,t))return!0;var r=t.internalDeps();return r.length?(e.push(t),pt.any(r,n)):(e.push(t),!1)}var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return pt.any(t,n)}(pt.map((function(t){return t.obs}),r)),a=t(new m(At,"when",o),(function(t){function n(t){for(var n=0;n<t.ixs.length;n++){var e=t.ixs[n];if(!r[e.index].hasAtLeast(e.count))return!1}return!0}function e(t){for(var n=0;n<t.ixs.length;n++){var e=t.ixs[n];if(!r[e.index].mayHave(e.count))return!0}}function o(t){return!t.source.flatten}function u(u){return function(l){function p(){return bt.whenDoneWith(a,g)}function d(){if(!(c.length>0))return mt;for(var e,s=mt,a=c.pop(),u=0;u<i.length;u++)if(n(e=i[u])){for(var h=[],l=0;l<e.ixs.length;l++){var p=r[e.ixs[l].index].consume();h.push(p.value)}var f=e.f.apply(null,h);return s=t(a.e.apply(f)),c.length&&(c=pt.filter(o,c)),s===gt?s:d()}}function g(){var n=d();return h&&(pt.all(r,G)||pt.all(i,e))&&(n=gt,t(f())),n===gt&&l(),n}return u.subscribe((function(n){if(n.isEnd)h=!0,u.markEnded(),p();else if(n.isError)var e=t(n);else u.push(n),u.sync&&(c.push({source:u,e:n}),s||bt.hasWaiters()?p():g());return e===gt&&l(),e||mt}))}}var c=[],h=!1;return new O(function(){for(var t,n=[],e=0;e<r.length;e++)t=r[e],n.push(u(t));return n}()).unsubscribe}));return a}function z(t){return pt.isFunction(t)?t:pt.always(t)}function G(t){return!t.sync||t.ended}function Q(t,n){1===t.length&&ut(t[0])&&(t=t[0]);var e=function(){for(var n=[],e=0;e<t.length;e++)n.push(new D(t[e]));return n}();return v(new m(At,"groupSimultaneous",t),R((function(t,e){return new L(t,e,null,n)}),[e,function(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];return n}]))}function U(t){return ut(t[0])?t[0]:Array.prototype.slice.call(t)}function Y(t){return pt.isFunction(t[0])?[U(Array.prototype.slice.call(t,1)),t[0]]:[U(Array.prototype.slice.call(t,0,t.length-1)),pt.last(t)]}function Z(n){var e=new L(new m(At,"once",[n]),(function(r){return bt.soonButNotYet(e,(function(){r(d(n)),r(f())})),t}));return e}function X(t){return 1===t.length&&ct(t[0])?pt.always(t[0]):E(t)}function J(t){return ct(t)?t:Z(t)}function K(t,n){var e=new L(y(t,"justInitValue"),(function(n){var r=void 0,i=t.dispatcher.subscribe((function(t){return t.isEnd||(r=t),gt}));return bt.whenDoneWith(e,(function(){return null!=r&&n(r),n(f())})),i}),null,Et);return e.concat(n,Et).toProperty()}function tt(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pt.id;return new L(new m(At,"fromBinder",[t,n]),(function(e){var r=!1,i=!1,o=function(){if(!r)return null!=s?(s(),r=!0):i=!0},s=t((function(){for(var t,r=arguments.length,i=Array(r),s=0;s<r;s++)i[s]=arguments[s];var a=n.apply(this,i);ut(a)&&(null!=(t=pt.last(a))?t._isEvent:void 0)||(a=[a]);for(var u,c=At.more,h=0;h<a.length;h++)if(u=a[h],(c=e(u=d(u)))===At.noMore||u.isEnd)return o(),c;return c}));return i&&o(),o}))}function nt(t,n){return v(new m(At,"later",[t,n]),tt((function(e){var r=At.scheduler.setTimeout((function(){return e([n,f()])}),t);return function(){return At.scheduler.clearTimeout(r)}})))}function et(){if(!(this instanceof et))return new et;this.unsubAll=pt.bind(this.unsubAll,this),this.subscribeAll=pt.bind(this.subscribeAll,this),this.guardedSink=pt.bind(this.guardedSink,this),this.sink=void 0,this.subscriptions=[],this.ended=!1,L.call(this,new m(At,"Bus",[]),this.subscribeAll)}function rt(t){function n(t,n,e){return(function(t){return t[t.length-1]}(t))[n]=e,e}function e(t,e){return function(r,i){n(r,t,i[e])}}function r(t,e){return function(r){n(r,t,e)}}function i(t){return ut(t)?[]:{}}function o(t,e){return function(r){var o=i(e);n(r,t,o),r.push(o)}}function s(t){if(ct(t))return!0;if(t&&(t.constructor==Object||t.constructor==Array))for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&s(t[n]))return!0}function a(t,n){ct(n)?(h.push(n),c.push(e(t,h.length-1))):s(n)?(c.push(o(t,n)),u(n),c.push((function(t){t.pop()}))):c.push(r(t,n))}function u(t){pt.each(t,a)}var c=[],h=[],l=s(t)?(u(t),At.combineAsArray(h).map((function(n){for(var e=i(t),r=[e],o=0;o<c.length;o++)(0,c[o])(r,n);return e}))):At.constant(t);return v(new m(At,"combineTemplate",[t]),l)}function it(t){this.observable=t}function ot(t,n){return v(new m(At,"fromPoll",[t,n]),tt((function(n){var e=At.scheduler.setInterval(n,t);return function(){return At.scheduler.clearInterval(e)}}),n))}function st(t){return[t,f()]}function at(){var t=U(arguments);return t.length?new L(new m(At,"mergeAll",t),(function(n){var e=0;return new O(pt.map((function(r){return function(i){return r.dispatcher.subscribe((function(r){if(r.isEnd)return++e===t.length?n(f()):mt;var o=n(r);return o===gt&&i(),o}))}}),t)).unsubscribe})):P()}var ut=Array.isArray||function(t){return t instanceof Array},ct=function(t){return t&&t._isObservable};e(o.prototype,{_isSome:!0,getOrElse:function(){return this.value},get:function(){return this.value},filter:function(t){return t(this.value)?new o(this.value):ht},map:function(t){return new o(t(this.value))},forEach:function(t){return t(this.value)},isDefined:!0,toArray:function(){return[this.value]},inspect:function(){return"Some("+this.value+")"},toString:function(){return this.inspect()}});var ht={_isNone:!0,getOrElse:function(t){return t},filter:function(){return ht},map:function(){return ht},forEach:function(){},isDefined:!1,toArray:function(){return[]},inspect:function(){return"None"},toString:function(){return this.inspect()}},lt=function(t){return t&&(t._isSome||t.isNone)?t:new o(t)},pt={indexOf:Array.prototype.indexOf?function(t,n){return t.indexOf(n)}:function(t,n){for(var e=0;e<t.length;e++)if(n===t[e])return e;return-1},indexWhere:function(t,n){for(var e=0;e<t.length;e++)if(n(t[e]))return e;return-1},head:function(t){return t[0]},always:function(t){return function(){return t}},negate:function(t){return function(n){return!t(n)}},empty:function(t){return 0===t.length},tail:function(t){return t.slice(1,t.length)},filter:function(t,n){for(var e,r=[],i=0;i<n.length;i++)t(e=n[i])&&r.push(e);return r},map:function(t,n){return function(){for(var e,r=[],i=0;i<n.length;i++)e=n[i],r.push(t(e));return r}()},each:function(t,n){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&n(e,t[e])},toArray:function(t){return ut(t)?t:[t]},contains:function(t,n){return-1!==pt.indexOf(t,n)},id:function(t){return t},last:function(t){return t[t.length-1]},all:function(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pt.id,e=0;e<t.length;e++)if(!n(t[e]))return!1;return!0},any:function(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pt.id,e=0;e<t.length;e++)if(n(t[e]))return!0;return!1},without:function(t,n){return pt.filter((function(n){return n!==t}),n)},remove:function(t,n){var e=pt.indexOf(n,t);if(e>=0)return n.splice(e,1)},fold:function(t,n,e){for(var r=0;r<t.length;r++)n=e(n,t[r]);return n},flatMap:function(t,n){return pt.fold(n,[],(function(n,e){return n.concat(t(e))}))},cached:function(t){var n=ht;return function(){return(null!=n?n._isNone:void 0)&&(n=t(),t=void 0),n}},bind:function(t,n){return function(){return t.apply(n,arguments)}},isFunction:function(t){return"function"==typeof t},toString:function(t){var n,e,r={}.hasOwnProperty;try{return ft++,null==t?"undefined":pt.isFunction(t)?"function":ut(t)?ft>5?"[..]":"["+pt.map(pt.toString,t).toString()+"]":null!=(null!=t?t.toString:void 0)&&t.toString!==Object.prototype.toString?t.toString():"object"==typeof t?ft>5?"{..}":"{"+function(){var i=[];for(n in t)r.call(t,n)&&(e=function(){try{return t[n]}catch(t){return t}}(),i.push(pt.toString(n)+":"+pt.toString(e)));return i}()+"}":t}finally{ft--}}},ft=0,dt=0;s.prototype._isEvent=!0,s.prototype.isEvent=!0,s.prototype.isEnd=!1,s.prototype.isInitial=!1,s.prototype.isNext=!1,s.prototype.isError=!1,s.prototype.hasValue=!1,s.prototype.filter=function(){return!0},s.prototype.inspect=function(){return this.toString()},s.prototype.log=function(){return this.toString()},s.prototype.toNext=function(){return this},r(a,s),a.prototype.isNext=!0,a.prototype.hasValue=!0,a.prototype.fmap=function(t){return this.apply(t(this.value))},a.prototype.apply=function(t){return new a(t)},a.prototype.filter=function(t){return t(this.value)},a.prototype.toString=function(){return pt.toString(this.value)},a.prototype.log=function(){return this.value},a.prototype._isNext=!0,r(u,a),u.prototype._isInitial=!0,u.prototype.isInitial=!0,u.prototype.isNext=!1,u.prototype.apply=function(t){return new u(t)},u.prototype.toNext=function(){return new a(this.value)},r(c,s),c.prototype.isEnd=!0,c.prototype.fmap=function(){return this},c.prototype.apply=function(){return this},c.prototype.toString=function(){return"<end>"},r(h,s),h.prototype.isError=!0,h.prototype.fmap=function(){return this},h.prototype.apply=function(){return this},h.prototype.toString=function(){return"<error> "+pt.toString(this.error)};var gt="<no-more>",mt="<more>",yt=[];e(m.prototype,{_isDesc:!0,deps:function(){return this.cached||(this.cached=b([this.context].concat(this.args))),this.cached},toString:function(){var t=pt.map(pt.toString,this.args);return pt.toString(this.context)+"."+pt.toString(this.method)+"("+t+")"}});var vt={setTimeout:function(t,n){return setTimeout(t,n)},setInterval:function(t,n){return setInterval(t,n)},clearInterval:function(t){return clearInterval(t)},clearTimeout:function(t){return clearTimeout(t)},now:function(){return(new Date).getTime()}},bt=function(){function t(t){t<=h||(c[t-1]||(c[t-1]=[[],0]),h=t)}function n(n,i){if(!s&&!p)return i();t(1);for(var o=0;o<h-1&&!e(n,c[o][0]);)o++;c[o][0].push([n,i]),s||r()}function e(t,n){for(var e=0;e<n.length;e++)if(n[e][0].id==t.id)return!0;return!1}function r(){var n=h;if(n){var e=!p;p=!0;try{for(;h>=n;){var r=c[h-1];if(!r)throw new Error("Unexpected stack top: "+r);var i=r[0],o=r[1];if(!(o<i.length)){r[0]=[],r[1]=0;break}var s=i[o][1];r[1]++,t(h+1);var a=!1;try{for(s(),a=!0;h>n&&0==c[h-1][0].length;)h--}finally{a||(c=[],h=0)}}}finally{e&&(p=!1)}}}function i(t,n){if(s){var e=u[t.id];return null==e?(e=u[t.id]=[n],a.push(t)):e.push(n)}return n()}function o(t,n){var e=a[t],r=e.id,i=u[r];a.splice(t,1),delete u[r],n&&a.length>0&&function t(n){if(!l[n.id]){for(var e,r=n.internalDeps(),i=0;i<r.length;i++)e=r[i],t(e),u[e.id]&&o(pt.indexOf(a,e),!1);l[n.id]=!0}}(e);for(var s=0;s<i.length;s++)(0,i[s])()}var s=null,a=[],u={},c=[],h=0,l={},p=!1;return{toString:function(){return pt.toString({rootEvent:s,processingAfters:p,waiterObs:a,waiters:u,aftersStack:c,aftersStackHeight:h,flushed:l})},whenDoneWith:i,hasWaiters:function(){return a.length>0},inTransaction:function(t,n,e,i){if(s)return e.apply(n,i);s=t;try{var u=e.apply(n,i);!function(){for(;a.length>0;)o(0,!0);l={}}()}finally{s=null,r()}return u},currentEventId:function(){return s?s.id:void 0},wrappedSubscribe:function(t,e){function r(){return i=!0,s()}var i=!1,o=!1,s=function(){return o=!0};return s=t.dispatcher.subscribe((function(o){return n(t,(function(){if(!i&&e(o)===gt)return r()}))})),o&&s(),r},afterTransaction:n,soonButNotYet:function(t,n){s?i(t,n):At.scheduler.setTimeout(n,0)},isInTransaction:function(){return null!==s}}}();w.prototype.hasSubscribers=function(){return this.subscriptions.length>0},w.prototype.removeSub=function(t){return this.subscriptions=pt.without(t,this.subscriptions),this.subscriptions},w.prototype.push=function(t){return t.isEnd&&(this.ended=!0),bt.inTransaction(t,this,this.pushIt,[t])},w.prototype.pushToSubscriptions=function(t){try{for(var n=this.subscriptions,e=n.length,r=0;r<e;r++){var i=n[r];(i.sink(t)===gt||t.isEnd)&&this.removeSub(i)}return!0}catch(t){throw this.pushing=!1,this.queue=[],t}},w.prototype.pushIt=function(t){if(this.pushing)return this.queue.push(t),mt;if(t!==this.prevError){for(t.isError&&(this.prevError=t),this.pushing=!0,this.pushToSubscriptions(t),this.pushing=!1;this.queue.length;)t=this.queue.shift(),this.push(t);return this.hasSubscribers()?mt:(this.unsubscribeFromSource(),gt)}},w.prototype.handleEvent=function(t){return this._handleEvent?this._handleEvent(t):this.push(t)},w.prototype.unsubscribeFromSource=function(){this.unsubSrc&&this.unsubSrc(),this.unsubSrc=void 0},w.prototype.subscribe=function(n){var e;return this.ended?(n(f()),t):(e={sink:n},this.subscriptions.push(e),1===this.subscriptions.length&&(this.unsubSrc=this._subscribe(this.handleEvent)),function(t){return function(){if(t.removeSub(e),!t.hasSubscribers())return t.unsubscribeFromSource()}}(this))};var wt=x((function(t){for(var n=arguments.length,e=Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];return pt.isFunction(t)?e.length?S(t,e):t:_(t)?A(t,e):pt.always(t)})),xt=0;e(I.prototype,{_isObservable:!0,subscribe:function(t){return bt.wrappedSubscribe(this,t)},subscribeInternal:function(t){return this.dispatcher.subscribe(t)},onValue:function(){var t=E(arguments);return this.subscribe((function(n){if(n.hasValue)return t(n.value)}))},onValues:function(t){return this.onValue((function(n){return t.apply(void 0,n)}))},onError:function(){var t=E(arguments);return this.subscribe((function(n){if(n.isError)return t(n.error)}))},onEnd:function(){var t=E(arguments);return this.subscribe((function(n){if(n.isEnd)return t()}))},name:function(t){return this._name=t,this},withDescription:function(){return this.desc=y.apply(void 0,arguments),this},toString:function(){return this._name?this._name:this.desc.toString()},deps:function(){return this.desc.deps()},internalDeps:function(){return this.initialDesc.deps()}}),I.prototype.assign=I.prototype.onValue,I.prototype.forEach=I.prototype.onValue,I.prototype.inspect=I.prototype.toString,r(N,w),e(N.prototype,{push:function(t){return t.isEnd&&(this.propertyEnded=!0),t.hasValue&&(this.current=new o(t),this.currentValueRootId=bt.currentEventId()),w.prototype.push.call(this,t)},maybeSubSource:function(n,e){return e===At.noMore?t:this.propertyEnded?(n(f()),t):w.prototype.subscribe.call(this,n)},subscribe:function(t){var n=this,e=At.more;if(this.current.isDefined&&(this.hasSubscribers()||this.propertyEnded)){var r=bt.currentEventId(),i=this.currentValueRootId;return!this.propertyEnded&&i&&r&&r!==i?(bt.whenDoneWith(this.property,(function(){if(n.currentValueRootId===i)return t(l(n.current.get().value))})),this.maybeSubSource(t,e)):(bt.inTransaction(void 0,this,(function(){return e=t(l(this.current.get().value))}),[]),this.maybeSubSource(t,e))}return this.maybeSubSource(t,e)}}),r(C,I),e(C.prototype,{_isProperty:!0,changes:function(){var t=this;return new L(new m(this,"changes",[]),(function(n){return t.dispatcher.subscribe((function(t){if(!t.isInitial)return n(t)}))}))},withHandler:function(t){return new C(new m(this,"withHandler",[t]),this.dispatcher.subscribe,t)},toProperty:function(){return this}});var Et={forceAsync:!1},St=y("Bacon","new EventStream",[]);r(L,I),e(L.prototype,{_isEventStream:!0,toProperty:function(t){var n=0===arguments.length?ht:lt(t),e=this.dispatcher;return new C(new m(this,"toProperty",[t]),M(n,(function(t){return e.subscribe(t)})))},toEventStream:function(){return this},withHandler:function(t){return new L(new m(this,"withHandler",[t]),this.dispatcher.subscribe,t,Et)}}),e(O.prototype,{add:function(n){var e=this;if(!this.unsubscribed){var r=!1,i=t;return this.starting.push(n),i=n(this.unsubscribe,(function(){if(!e.unsubscribed)return r=!0,e.remove(i),pt.remove(n,e.starting)})),this.unsubscribed||r?i():this.subscriptions.push(i),pt.remove(n,this.starting),i}},remove:function(t){if(!this.unsubscribed)return void 0!==pt.remove(t,this.subscriptions)?t():void 0},unsubscribe:function(){if(!this.unsubscribed){this.unsubscribed=!0;for(var t=this.subscriptions,n=0;n<t.length;n++)t[n]();return this.subscriptions=[],this.starting=[],[]}},count:function(){return this.unsubscribed?0:this.subscriptions.length+this.starting.length},empty:function(){return 0===this.count()}});var At={toString:function(){return"Bacon"},_:pt,Event:s,Next:a,Initial:u,Error:h,End:c,noMore:gt,more:mt,Desc:m,spy:function(t){return yt.push(t)},UpdateBarrier:bt,scheduler:vt,Dispatcher:w,Observable:I,EventStream:L,Property:C,CompositeUnsubscribe:O,never:P,constant:W,version:"<version>"};At.Bacon=At,I.prototype.map=H,I.prototype.withStateMachine=function(t,n){var e=t;return v(new m(this,"withStateMachine",[t,n]),this.withHandler((function(t){var r=n(e,t),i=r[0],o=r[1];e=i;for(var s,a=mt,u=0;u<o.length;u++)if(s=o[u],(a=this.push(s))===gt)return a;return a})))};var _t=function(t,n){return t===n},kt=function(t){return null!=t&&t._isNone};I.prototype.skipDuplicates=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_t;return v(new m(this,"skipDuplicates",[]),this.withStateMachine(ht,(function(n,e){return e.hasValue?e.isInitial||kt(n)||!t(n.get(),e.value)?[new o(e.value),[e]]:[n,[]]:[n,[e]]})))},e(V.prototype,{_isSource:!0,subscribe:function(t){return this.obs.dispatcher.subscribe(t)},toString:function(){return this.obs.toString()},markEnded:function(){return this.ended=!0,!0},consume:function(){return this.queue[0]},push:function(t){this.queue=[t]},mayHave:function(){return!0},hasAtLeast:function(){return this.queue.length},flatten:!0}),r(q,V),e(q.prototype,{consume:function(){return this.queue.shift()},push:function(t){return this.queue.push(t)},mayHave:function(t){return!this.ended||this.queue.length>=t},hasAtLeast:function(t){return this.queue.length>=t},flatten:!1}),r(D,V),e(D.prototype,{consume:function(){var t=this.queue;return this.queue=[],{value:t}},push:function(t){return this.queue.push(t.value)},hasAtLeast:function(){return!0}}),V.isTrigger=function(t){return null!=t&&(t._isSource?t.sync:t._isEventStream)},V.fromObservable=function(t){return null!=t&&t._isSource?t:null!=t&&t._isProperty?new V(t,!1):new q(t,!0)},At.when=j,At.groupSimultaneous=function(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];return Q(n)},I.prototype.awaiting=function(t){return v(new m(this,"awaiting",[t]),Q([this,t],Et).map((function(t){return 0===t[1].length})).toProperty(!1).skipDuplicates())},At.combineAsArray=function(){var t=U(arguments);if(t.length){for(var n=[],e=0;e<t.length;e++){var r=ct(t[e])?t[e]:At.constant(t[e]);n.push(new V(r,!0))}return v(new At.Desc(At,"combineAsArray",t),F(n,(function(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];return n})))}return W([])},At.onValues=function(){return At.combineAsArray(Array.prototype.slice.call(arguments,0,arguments.length-1)).onValues(arguments[arguments.length-1])},At.combineWith=function(){var t=Y(arguments),n=t[0],e=t[1];return v(new m(At,"combineWith",[e].concat(n)),At.combineAsArray(n).map((function(t){return e.apply(void 0,t)})))},I.prototype.combine=function(t,n){var e=T(n);return v(new m(this,"combine",[t,n]),At.combineAsArray(this,t).map((function(t){return e(t[0],t[1])})))},I.prototype.not=function(){return v(new m(this,"not",[]),this.map((function(t){return!t})))},C.prototype.and=function(t){return v(new m(this,"and",[t]),this.combine(t,(function(t,n){return t&&n})))},C.prototype.or=function(t){return v(new m(this,"or",[t]),this.combine(t,(function(t,n){return t||n})))},L.prototype.bufferWithTime=function(t){return v(new m(this,"bufferWithTime",[t]),this.bufferWithTimeOrCount(t,Number.MAX_VALUE))},L.prototype.bufferWithCount=function(t){return v(new m(this,"bufferWithCount",[t]),this.bufferWithTimeOrCount(void 0,t))},L.prototype.bufferWithTimeOrCount=function(t,n){var e=function(e){return e.values.length===n?e.flush():void 0!==t?e.schedule():void 0};return v(new m(this,"bufferWithTimeOrCount",[t,n]),this.buffer(t,e,e))},L.prototype.buffer=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,i={scheduled:null,end:void 0,values:[],flush:function(){if(this.scheduled&&(At.scheduler.clearTimeout(this.scheduled),this.scheduled=null),this.values.length>0){var t=this.values;this.values=[];var n=this.push(p(t));if(null!=this.end)return this.push(this.end);if(n!==gt)return r(this)}else if(null!=this.end)return this.push(this.end)},schedule:function(){var t=this;if(!this.scheduled)return this.scheduled=n((function(){return t.flush()}))}},o=mt;if(!pt.isFunction(n)){var s=n;n=function(t){return At.scheduler.setTimeout(t,s)}}return v(new m(this,"buffer",[]),this.withHandler((function(t){var n=this;return i.push=function(t){return n.push(t)},t.isError?o=this.push(t):t.isEnd?(i.end=t,i.scheduled||i.flush()):(i.values.push(t.value),e(i)),o})))},I.prototype.filter=function(t){for(var n=arguments.length,e=Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];return $(this,t,e,(function(t){return v(new m(this,"filter",[t]),this.withHandler((function(n){return n.filter(t)?this.push(n):mt})))}))},At.once=Z,I.prototype.flatMap_=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=this,r=[e],i=[],o=this._isProperty,s=o?B:L,a=!1,u=s(n.desc||new m(this,"flatMap_",arguments),(function(r){var s=new O,u=[],c=function(n){if(o&&n.isInitial){if(a)return mt;a=!0}var e=J(t(n));return i.push(e),s.add((function(t,n){return e.dispatcher.subscribe((function(o){if(o.isEnd)return pt.remove(e,i),h(),l(n),gt;o=o.toNext();var s=r(o);return s===gt&&t(),s}))}))},h=function(){var t=u.shift();if(t)return c(t)},l=function(t){if(t(),s.empty())return r(f())};return s.add((function(t,i){return e.dispatcher.subscribe((function(t){return t.isEnd?l(i):t.isError&&!n.mapError?r(t):n.firstOnly&&s.count()>1?mt:s.unsubscribed?gt:n.limit&&s.count()>n.limit?u.push(t):c(t)}))})),s.unsubscribe}));return u.internalDeps=function(){return i.length?r.concat(i):r},u};var $t=function(t){return function(n){return t(n.value)}};I.prototype.flatMapWithConcurrencyLimit=function(t){for(var n=arguments.length,e=Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];return this.flatMap_($t(X(e)),{limit:t,desc:new m(this,"flatMapWithConcurrencyLimit",[t].concat(e))})},I.prototype.flatMapConcat=function(){return v(new m(this,"flatMapConcat",Array.prototype.slice.call(arguments,0)),this.flatMapWithConcurrencyLimit.apply(this,[1].concat(Array.prototype.slice.call(arguments))))},L.prototype.concat=function(n,e){var r=this;return new L(new m(r,"concat",[n]),(function(e){var i=t,o=r.dispatcher.subscribe((function(t){return t.isEnd?i=n.toEventStream().dispatcher.subscribe(e):e(t)}));return function(){return o(),i()}}),null,e)},C.prototype.concat=function(t){return K(this,this.changes().concat(t))},At.concatAll=function(){var t=U(arguments);return t.length?v(new m(At,"concatAll",t),pt.fold(pt.tail(t),pt.head(t).toEventStream(),(function(t,n){return t.concat(n)}))):P()},At.fromBinder=tt,At.later=nt,I.prototype.bufferingThrottle=function(t){return v(new m(this,"bufferingThrottle",[t]),this.flatMapConcat((function(n){return Z(n).concat(nt(t).filter(!1))})))},C.prototype.bufferingThrottle=function(){return I.prototype.bufferingThrottle.apply(this,arguments).toProperty()},r(et,L),e(et.prototype,{unsubAll:function(){for(var t,n=this.subscriptions,e=0;e<n.length;e++)"function"==typeof(t=n[e]).unsub&&t.unsub()},subscribeAll:function(t){if(this.ended)t(f());else{this.sink=t;for(var n,e=function(t){return t.slice(0)}(this.subscriptions),r=0;r<e.length;r++)n=e[r],this.subscribeInput(n)}return this.unsubAll},guardedSink:function(t){var n=this;return function(e){return e.isEnd?(n.unsubscribeInput(t),At.noMore):n.sink(e)}},subscribeInput:function(t){return t.unsub=t.input.dispatcher.subscribe(this.guardedSink(t.input)),t.unsub},unsubscribeInput:function(t){for(var n,e=this.subscriptions,r=0;r<e.length;r++)if((n=e[r]).input===t)return"function"==typeof n.unsub&&n.unsub(),void this.subscriptions.splice(r,1)},plug:function(t){var n=this;if(!this.ended){var e={input:t};return this.subscriptions.push(e),void 0!==this.sink&&this.subscribeInput(e),function(){return n.unsubscribeInput(t)}}},end:function(){if(this.ended=!0,this.unsubAll(),"function"==typeof this.sink)return this.sink(f())},push:function(t){if(!this.ended&&"function"==typeof this.sink){var n=!this.pushing;if(!n)return this.pushQueue||(this.pushQueue=[]),void this.pushQueue.push(t);this.pushing=!0;try{return this.sink(p(t))}finally{if(n&&this.pushQueue){for(var e=0;e<this.pushQueue.length;){var r=this.pushQueue[e];this.sink(p(r)),e++}this.pushQueue=null}this.pushing=!1}}},error:function(t){if("function"==typeof this.sink)return this.sink(new h(t))}}),At.Bus=et,I.prototype.flatMap=function(){return this.flatMap_($t(X(arguments)),{desc:new m(this,"flatMap",arguments)})};var Tt=function(t,n){return x((function(e){for(var r=S(n,[function(t,n){return e.apply(void 0,t.concat([n]))}]),i=arguments.length,o=Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];return v(new m(At,t,[e].concat(o)),At.combineAsArray(o).flatMap(r).changes())}))};At.fromCallback=Tt("fromCallback",(function(n){for(var e=arguments.length,r=Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];return tt((function(e){return k(n,r)(e),t}),(function(t){return[t,f()]}))})),At.fromNodeCallback=Tt("fromNodeCallback",(function(n){for(var e=arguments.length,r=Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];return tt((function(e){return k(n,r)(e),t}),(function(t,n){return t?[new h(t),f()]:[n,f()]}))})),At.combineTemplate=rt,I.prototype.mapEnd=function(){var t=E(arguments);return v(new m(this,"mapEnd",[t]),this.withHandler((function(n){return n.isEnd?(this.push(p(t(n))),this.push(f()),gt):this.push(n)})))},I.prototype.skipErrors=function(){return v(new m(this,"skipErrors",[]),this.withHandler((function(t){return t.isError?mt:this.push(t)})))},I.prototype.takeUntil=function(t){var n={},e=Q([this.mapEnd(n),t.skipErrors()],Et);this instanceof C&&(e=e.toProperty());var r=e.withHandler((function(t){if(t.hasValue){var e=t.value,r=e[0];if(e[1].length)return this.push(f());for(var i,o=mt,s=0;s<r.length;s++)o=(i=r[s])===n?this.push(f()):this.push(p(i));return o}return this.push(t)}));return v(new m(this,"takeUntil",[t]),r)},I.prototype.flatMapLatest=function(){var t=X(arguments),n=this._isProperty?this.toEventStream(Et):this,e=n.flatMap((function(e){return J(t(e)).takeUntil(n)}));return this._isProperty&&(e=e.toProperty()),v(new m(this,"flatMapLatest",[t]),e)},C.prototype.delayChanges=function(t,n){return v(t,K(this,n(this.changes())))},L.prototype.delayChanges=function(t,n){return v(t,n(this))},I.prototype.delay=function(t){return this.delayChanges(new m(this,"delay",[t]),(function(n){return n.flatMap((function(n){return nt(t,n)}))}))},At.Observable.prototype.debounce=function(t){return this.delayChanges(new m(this,"debounce",[t]),(function(n){return n.flatMapLatest((function(n){return At.later(t,n)}))}))},At.Observable.prototype.debounceImmediate=function(t){return this.delayChanges(new m(this,"debounceImmediate",[t]),(function(n){return n.flatMapFirst((function(n){return At.once(n).concat(At.later(t).filter(!1))}))}))},I.prototype.decode=function(t){return v(new m(this,"decode",[t]),this.combine(rt(t),(function(t,n){return n[t]})))},I.prototype.scan=function(n,e){var r,i=this;e=T(e);var o=n,s=!1;return r=new C(new m(this,"scan",[n,e]),(function(n){var a=!1,c=t,h=mt,l=function(){a||(a=s=!0,(h=n(new u(o)))===gt&&(c(),c=t))};return c=i.dispatcher.subscribe((function(t){if(t.hasValue){if(s&&t.isInitial)return mt;t.isInitial||l(),a=s=!0;var r=e(o,t.value);return o=r,n(t.apply(r))}if(t.isEnd&&(h=l()),h!==gt)return n(t)})),bt.whenDoneWith(r,l),c}))},I.prototype.diff=function(t,n){return v(new m(this,"diff",[t,n=T(n)]),this.scan([t],(function(t,e){return[e,n(t[0],e)]})).filter((function(t){return 2===t.length})).map((function(t){return t[1]})))},I.prototype.doAction=function(){var t=E(arguments);return v(new m(this,"doAction",[t]),this.withHandler((function(n){return n.hasValue&&t(n.value),this.push(n)})))},I.prototype.doEnd=function(){var t=E(arguments);return v(new m(this,"doEnd",[t]),this.withHandler((function(n){return n.isEnd&&t(),this.push(n)})))},I.prototype.doError=function(){var t=E(arguments);return v(new m(this,"doError",[t]),this.withHandler((function(n){return n.isError&&t(n.error),this.push(n)})))},I.prototype.doLog=function(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];return v(new m(this,"doLog",n),this.withHandler((function(t){var e;return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log&&(e=console).log.apply(e,n.concat([t.log()])),this.push(t)})))},I.prototype.endOnError=function(t){null!=t||(t=!0);for(var n=arguments.length,e=Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];return $(this,t,e,(function(t){return v(new m(this,"endOnError",[]),this.withHandler((function(n){return n.isError&&t(n.error)?(this.push(n),this.push(f())):this.push(n)})))}))},I.prototype.errors=function(){return v(new m(this,"errors",[]),this.filter((function(){return!1})))},it.prototype.subscribe=function(t,n,e){var r="function"==typeof t?{next:t,error:n,complete:e}:t,i={closed:!1,unsubscribe:function(){i.closed=!0,o()}},o=this.observable.subscribe((function(t){t.isError?(r.error&&r.error(t.error),i.unsubscribe()):t.isEnd?(i.closed=!0,r.complete&&r.complete()):r.next&&r.next(t.value)}));return i},it.prototype[i("observable")]=function(){return this},I.prototype.toESObservable=function(){return new it(this)},I.prototype[i("observable")]=I.prototype.toESObservable,I.prototype.take=function(t){return t<=0?P():v(new m(this,"take",[t]),this.withHandler((function(n){return n.hasValue?--t>0?this.push(n):(0===t&&this.push(n),this.push(f()),gt):this.push(n)})))},I.prototype.first=function(){return v(new m(this,"first",[]),this.take(1))},I.prototype.flatMapEvent=function(){return this.flatMap_(X(arguments),{mapError:!0,desc:new m(this,"flatMapEvent",arguments)})},I.prototype.flatMapFirst=function(){return this.flatMap_($t(X(arguments)),{firstOnly:!0,desc:new m(this,"flatMapFirst",arguments)})},I.prototype.mapError=function(){var t=E(arguments);return v(new m(this,"mapError",[t]),this.withHandler((function(n){return n.isError?this.push(p(t(n.error))):this.push(n)})))},I.prototype.flatMapError=function(t){return this.flatMap_((function(n){return n instanceof h?t(n.error):n}),{mapError:!0,desc:new m(this,"flatMapError",[t])})},I.prototype.flatScan=function(t,n){var e=t;return this.flatMapConcat((function(t){return J(n(e,t)).doAction((function(t){return e=t}))})).toProperty(t)},L.prototype.sampledBy=function(t,n){return v(new m(this,"sampledBy",[t,n]),this.toProperty().sampledBy(t,n))},C.prototype.sampledBy=function(t,n){n=null!=n?T(n):At._.id;var e=new V(this,!1),r=new V(t,!0),i=(t._isProperty?F:j)([e,r],n);return v(new m(this,"sampledBy",[t,n]),i)},C.prototype.sample=function(t){return v(new m(this,"sample",[t]),this.sampledBy(At.interval(t,{})))},I.prototype.map=function(t){return t&&t._isProperty?t.sampledBy(this,n):H.apply(this,arguments)},I.prototype.fold=function(t,n){return v(new m(this,"fold",[t,n]),this.scan(t,n).sampledBy(this.filter(!1).mapEnd().toProperty()))},I.prototype.reduce=I.prototype.fold,At.fromArray=function(t){if(t.length){var n=0,e=new L(new m(At,"fromArray",[t]),(function(r){var i=!1,o=mt,s=!1,a=!1;return bt.soonButNotYet(e,(function u(){if(a=!0,!s){for(s=!0;a;)if(a=!1,o!==gt&&!i){var c=t[n++];(o=r(d(c)))!==gt&&(n===t.length?r(f()):bt.afterTransaction(e,u))}return s=!1}})),function(){return i=!0}}));return e}return v(new m(At,"fromArray",t),P())},At.fromESObservable=function(t){var n;return n=t[i("observable")]?t[i("observable")]():t,new L(new m(At,"fromESObservable",[n]),(function(t){var e=n.subscribe({error:function(){t(new At.Error),t(new At.End)},next:function(n){t(new At.Next(n,!0))},complete:function(){t(new At.End)}});return e.unsubscribe?function(){e.unsubscribe()}:e}))};var It=[["addEventListener","removeEventListener"],["addListener","removeListener"],["on","off"],["bind","unbind"]],Nt=function(t){for(var n,e=0;e<It.length;e++){var r=[t[(n=It[e])[0]],t[n[1]]];if(r[0]&&r[1])return r}for(var i=0;i<It.length;i++){var o=t[(n=It[i])[0]];if(o)return[o,function(){}]}throw new Error("No suitable event methods in "+t)};return At.fromEvent=At.fromEventTarget=function(t,n,e){var r=Nt(t),i=r[0],o=r[1];return v(new m(At,"fromEvent",[t,n]),tt((function(e){return pt.isFunction(n)?(n(i.bind(t),e),function(){return n(o.bind(t),e)}):(i.call(t,n,e),function(){return o.call(t,n,e)})}),e))},At.fromPoll=ot,At.fromPromise=function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:st;return v(new m(At,"fromPromise",[t]),tt((function(e){var r=t.then(e,(function(t){return e(new h(t))}));return r&&"function"==typeof r.done&&r.done(),n?function(){if("function"==typeof t.abort)return t.abort()}:function(){}}),e))},I.prototype.groupBy=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pt.id,e={},r=this;return r.filter((function(n){return!e[t(n)]})).map((function(i){var o=t(i),s=r.filter((function(n){return t(n)===o})),a=Z(i).concat(s),u=n(a,i).withHandler((function(t){if(this.push(t),t.isEnd)return delete e[o]}));return e[o]=u,u}))},L.prototype.holdWhen=function(t){var n=!1,e=[],r=this,i=!1;return new L(new m(this,"holdWhen",[t]),(function(o){var s=new O,a=!1,u=function(t){if("function"==typeof t&&t(),s.empty()&&a)return o(f())};return s.add((function(r,s){return t.subscribeInternal((function(t){if(!t.hasValue)return t.isEnd?u(s):o(t);if(!(n=t.value)){var r=e;return e=[],function(){for(var t,n=[],e=0;e<r.length;e++)t=r[e],n.push(o(p(t)));return i&&(n.push(o(f())),s()),n}()}}))})),s.add((function(t,s){return r.subscribeInternal((function(t){return n&&t.hasValue?e.push(t.value):t.isEnd&&e.length?(i=!0,u(s)):o(t)}))})),a=!0,u(),s.unsubscribe}))},At.interval=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return v(new m(At,"interval",[t,n]),ot(t,(function(){return p(n)})))},At.$={},At.$.asEventStream=function(t,n,e){var r=this;return pt.isFunction(n)&&(e=n,n=void 0),v(new m(this.selector||this,"asEventStream",[t]),tt((function(e){return r.on(t,n,e),function(){return r.off(t,n,e)}}),e))},"undefined"!=typeof jQuery&&jQuery&&(jQuery.fn.asEventStream=At.$.asEventStream),"undefined"!=typeof Zepto&&Zepto&&(Zepto.fn.asEventStream=At.$.asEventStream),I.prototype.last=function(){var t;return v(new m(this,"last",[]),this.withHandler((function(n){if(n.isEnd)return t&&this.push(t),this.push(f()),gt;t=n})))},I.prototype.log=function(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];return this.subscribe((function(t){var e;"undefined"!=typeof console&&"function"==typeof console.log&&(e=console).log.apply(e,n.concat([t.log()]))})),this},L.prototype.merge=function(t){return v(new m(this,"merge",[t]),at(this,t))},At.mergeAll=at,At.repeatedly=function(t,n){var e=0;return v(new m(At,"repeatedly",[t,n]),ot(t,(function(){return n[e++%n.length]})))},At.repeat=function(t){var n=0;return tt((function(e){function r(t){return t.isEnd?o?i():o=!0:s=e(t)}function i(){var i;for(o=!0;o&&s!==gt;)i=t(n++),o=!1,i?a=i.subscribeInternal(r):e(f());return o=!0}var o=!1,s=mt,a=function(){};return i(),function(){return a()}}))},At.retry=function(t){if(!pt.isFunction(t.source))throw new Error("'source' option has to be a function");var n=t.source,e=t.retries||0,r=0,i=t.delay||function(){return 0},o=t.isRetryable||function(){return!0},s=!1,a=null;return v(new m(At,"retry",[t]),At.repeat((function(t){function u(){return n(t).endOnError().withHandler((function(t){return t.isError?o((a=t).error)&&(0===e||r<e)?void 0:(s=!0,this.push(t)):(t.hasValue&&(a=null,s=!0),this.push(t))}))}if(s)return null;if(a){var c={error:a.error,retriesDone:r},h=nt(i(c)).filter(!1);return r++,h.concat(At.once().flatMap(u))}return u()})))},At.sequentially=function(t,n){var e=0;return v(new m(At,"sequentially",[t,n]),ot(t,(function(){var t=n[e++];return e<n.length?t:e===n.length?[t,f()]:f()})))},I.prototype.skip=function(t){return v(new m(this,"skip",[t]),this.withHandler((function(n){return n.hasValue&&t>0?(t--,mt):this.push(n)})))},L.prototype.skipUntil=function(t){var n=t.take(1).map(!0).toProperty(!1);return v(new m(this,"skipUntil",[t]),this.filter(n))},L.prototype.skipWhile=function(t){for(var n=!1,e=arguments.length,r=Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];return $(this,t,r,(function(t){return v(new m(this,"skipWhile",[t]),this.withHandler((function(e){return!n&&e.hasValue&&t(e.value)?mt:(e.hasValue&&(n=!0),this.push(e))})))}))},C.prototype.startWith=function(t){return v(new m(this,"startWith",[t]),this.scan(t,(function(t,n){return n})))},L.prototype.startWith=function(t){return v(new m(this,"startWith",[t]),Z(t).concat(this))},I.prototype.slidingWindow=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return v(new m(this,"slidingWindow",[t,n]),this.scan([],(function(n,e){return n.concat([e]).slice(-t)})).filter((function(t){return t.length>=n})))},I.prototype.takeWhile=function(t){for(var n=arguments.length,e=Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];return $(this,t,e,(function(t){return v(new m(this,"takeWhile",[t]),this.withHandler((function(n){return n.filter(t)?this.push(n):(this.push(f()),gt)})))}))},I.prototype.throttle=function(t){return this.delayChanges(new m(this,"throttle",[t]),(function(n){return n.bufferWithTime(t).map((function(t){return t[t.length-1]}))}))},C.prototype.toEventStream=function(t){var n=this;return new L(new m(this,"toEventStream",[]),(function(t){return n.dispatcher.subscribe((function(n){return t(n.toNext())}))}),null,t)},I.prototype.firstToPromise=function(t){var n=this;if("function"!=typeof t){if("function"!=typeof Promise)throw new Error("There isn't default Promise, use shim or parameter");t=Promise}return new t((function(t,e){return n.subscribe((function(n){return n.hasValue&&t(n.value),n.isError&&e(n.error),gt}))}))},I.prototype.toPromise=function(t){return this.last().firstToPromise(t)},At.try=function(t){return function(n){try{return Z(t(n))}catch(t){return new h(t)}}},At.update=function(t){for(var n=arguments.length,e=Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];for(var i=e.length-1;i>0;)e[i]instanceof Function||(e[i]=pt.always(e[i])),e[i]=function(t){return function(){for(var n=arguments.length,e=Array(n),r=0;r<n;r++)e[r]=arguments[r];return function(n){return t.apply(void 0,[n].concat(e))}}}(e[i]),i-=2;return v(new m(At,"update",[t].concat(e)),j.apply(void 0,e).scan(t,(function(t,n){return n(t)})))},At.zipAsArray=function(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];var r=U(n);return v(new m(At,"zipAsArray",r),At.zipWith(r,(function(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];return n})))},At.zipWith=function(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];var r=Y(n),i=r[0],o=r[1];return i=pt.map((function(t){return t.toEventStream()}),i),v(new m(At,"zipWith",[o].concat(i)),At.when(i,o))},I.prototype.zip=function(t,n){return v(new m(this,"zip",[t]),At.zipWith([this,t],n||Array))},At}()},function(t,n,e){t.exports=e(3)},function(t,n){const{settings:e}=EGASmartSearchConfigs,r=`\n      .ega-smartsearch__ohidden {\n        overflow: hidden!important;\n      }\n      #ega-smartsearch-search-suggestion {\n        padding: 0;\n        top: 0;\n        z-index: 9999;\n        display: none;\n        box-shadow: 0 0 5px rgba(0,0,0,.25);\n        border-radius: 2px;\n        margin-top: 12px;\n        position: ${e.isFixedSearch};\n        background-color: ${e.colorBg};\n        width: ${e.searchWidth};\n        max-width: calc(100% - 10px);\n      }\n      #ega-smartsearch-search-suggestion h3 {\n        display: block;\n        padding: 3px 10px 0 10px;\n        text-align: right;\n        text-transform: uppercase;\n        font-size: 10px;\n        line-height: 16px;\n        cursor: auto;\n        margin: 0;\n        background-color: ${e.colorLabelBg};\n        color: ${e.colorLabelText};\n        border-top: 1px solid ${e.colorItemBorder};\n        border-bottom: 1px solid ${e.colorItemBorder};\n      }\n      #ega-smartsearch-search-suggestion ul {\n        padding: 0;\n        margin: 0;\n      }\n      #ega-smartsearch-search-suggestion ul li {\n        line-height: 16px;\n        padding: 4px 10px 4px 10px;\n        list-style: none;\n      }\n      #ega-smartsearch-search-suggestion ul li:not(:first-child) {\n        border-top: 1px solid ${e.colorItemBorder};\n      }\n      #ega-smartsearch-search-suggestion ul li:hover {\n        background-color: ${e.colorBgHover};\n      }\n      #ega-smartsearch-search-suggestion ul li a {\n        padding: 2px;\n        outline: none;\n        display: block;\n        overflow: hidden;\n        min-height: 60px;\n      }\n      #ega-smartsearch-search-suggestion ul li a:hover {\n        text-decoration: none;\n      }\n      #ega-smartsearch-search-top {\n        border-top-left-radius: 2px;\n        border-top-right-radius: 2px;\n        overflow-y: auto;\n        max-height: ${e.searchHeight};\n      }\n      .ega-smartsearch-item__image {\n        display: inline-block;\n        float: left;\n        margin: 5px 10px 5px 0px;\n        text-align: center;\n        width: 70px;\n      }\n      .ega-smartsearch-item__image img {\n        max-width: 70px;\n        max-height: 70px;\n\n      }\n      .ega-smartsearch-item__detail {\n        overflow: hidden;\n      }\n      .ega-smartsearch-item__title {\n        display: block;\n        font-size: 100%;\n        margin-top: 3px;\n        margin-bottom: 0;\n        color: ${e.colorItemTextTitle};\n      }\n      .ega-smartsearch-item__description {\n        margin-top: 5px;\n        color: ${e.colorItemTextDescription};\n      }\n      .ega-smartsearch-item__price {\n        margin-top: 6px;\n      }\n      .ega-smartsearch-item__price ins {\n        font-weight: bold;\n        text-decoration: none;\n        display: block;\n        font-size: 115%;\n        color: ${e.colorItemTextPrice};\n      }\n      .ega-smartsearch-item__price del {\n        font-size: 95%;\n        display: block;\n        margin-top: 5px;\n        color: ${e.colorItemTextCompareAtPrice};\n      }\n      .ega-smartsearch-item__notfound {\n        display: block;\n        padding: 15px 10px;\n        text-align: center;\n      }\n      #ega-smartsearch-search-bottom {\n        padding-top: 3px;\n        padding-bottom: 4px;\n        text-align: center;\n        cursor: pointer;\n        font-size: 90%;\n        border-top: 1px solid ${e.colorItemBorder};\n      }\n     #ega-smartsearch-search-bottom:hover {\n        background-color: ${e.colorBgHover};\n      }\n     #ega-smartsearch-search-bottom a {\n      color: ${e.colorItemTextViewAll};\n     }\n      #ega-smartsearch-search-bottom a:hover {\n        text-decoration: none;\n      }\n      #ega-smartsearch-search-bottom a span {\n        color: #ff0000;\n      }\n      #ega-smartsearch-search-suggestion .ega-smartsearch-search-view-item {\n        margin: 0 -5px;\n        cursor: pointer;\n        padding: 5px;\n\t\t\t\twidth: 40px;\n   \t\t \theight: 40px;\n  \t\t \tposition: relative;\n\t\t\t\ttransform: scale(0.7,0.7);\n       }\n      #ega-smartsearch-search-suggestion .ega-smartsearch-search-view-item.active{\n        border: 1px solid;\n       }\n      #ega-smartsearch-search-suggestion .ega-smartsearch-grid ul {\n        display: grid;\n        grid-template-columns: repeat(auto-fit, minmax(150px, 50%));\n      }\n      #ega-smartsearch-search-suggestion .ega-smartsearch-grid ul li a{\n        display: flex;\n        flex-direction: column;\n      }\n      #ega-smartsearch-search-suggestion .ega-smartsearch-grid  .ega-smartsearch-item__image{\n        margin: 5px auto\n      }\n      #ega-smartsearch-search-header {\n          display: flex;\n          justify-content: flex-end;\n          padding: 0 10px;\n          align-items:center; \n      }\n      .ega-smartsearch-search-title{\n        margin-right: auto;\n        font-size: 16px;\n        font-weight: 600;\n        color: ${e.colorHeaderText}\n      }\n      .ega-smartsearch-search-title span{\n        color: #ff0000;\n      }\n\t\t\t#ega-smartsearch-search-suggestion .ega-smartsearch-grid ul li{\n\t\t\t\t\tborder-top: none;\n\t\t\t\t\tborder-right: 1px solid ${e.colorItemBorder};\n\t\t\t\t\tborder-bottom: 1px solid ${e.colorItemBorder};\n\t\t\t}\n\n     \tspan.ega-smartsearch-search-icon-list {\n\t\t\t\t\twidth: calc(100% - 12px);\n\t\t\t\t\theight: 4px;\n\t\t\t\t\tbackground: #000;\n\t\t\t\t\tdisplay: block;\n\t\t\t\t\tmargin: 4px 3px 4px auto;\n\t\t\t\t\tposition: relative;\n\t\t\t}\n\t\t\tspan.ega-smartsearch-search-icon-list:before {\n\t\t\t\t\tcontent: '';\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\twidth: 4px;\n\t\t\t\t\theight: 4px;\n\t\t\t\t\ttop: 0;\n\t\t\t\t\tleft: -6px;\n\t\t\t\t\tbackground: #000;\n\t\t\t}\n\t\t\tspan.ega-smartsearch-search-icon-grid {\n\t\t\t\t\twidth: 5px;\n\t\t\t\t\theight: 5px;\n\t\t\t\t\tdisplay: block;\n\t\t\t\t\tbackground: #000;\n\t\t\t\t\tmargin: 3px auto;\n\t\t\t\t\tposition: relative;\n\t\t\t}\n\t\t\tspan.ega-smartsearch-search-icon-grid:before, span.ega-smartsearch-search-icon-grid:after {\n\t\t\t\t\tcontent: '';\n\t\t\t\t\twidth: 5px;\n\t\t\t\t\theight: 5px;\n\t\t\t\t\tbackground: #000;\n\t\t\t\t\tposition: absolute;\n\t\t\t}\n\t\t\tspan.ega-smartsearch-search-icon-grid:before{\n\t\t\t\t\tleft: -8px\n\t\t\t}\n\t\t\tspan.ega-smartsearch-search-icon-grid:after{\n\t\t\t\t\tright: -8px\n\t\t\t}\n\t\t\t#ega-spinner{\n\t\t\t\tdisplay: none;\n\t\t\t\tposition: relative;\n\t\t\t\twidth: 25px;\n\t\t\t\theight: 25px;\n\t\t\t\tmargin: 10px auto\n\t\t\t}\n\t\t\t#ega-spinner div{\n\t\t\t\tbox-sizing: border-box;\n\t\t\t\tdisplay: block;\n\t\t\t\tposition: absolute;\n\t\t\t\twidth: 17px;\n\t\t\t\theight: 17px;\n\t\t\t\tmargin: 6px;\n\t\t\t\tborder: 2px solid ${e.colorLoading};\n\t\t\t\tborder-radius: 50%;\n\t\t\t\tanimation: ega-loading--style2 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;\n\t\t\t\tborder-color: ${e.colorLoading} transparent transparent transparent;\n\n\t\t\t}\n\t\t\t#ega-spinner div:nth-child(1){\n\t\t\t    animation-delay: -0.45s;\n\t\t\t}\n\n\t\t\t#ega-spinner div:nth-child(2) {\n\t\t\t\tanimation-delay: -0.3s;\n\t\t\t}\n\n      /*  Hide all other search */\n      .smart-search-wrapper, #ajaxSearchResults, .ajaxSearchAuto {\n        display: none!important;\n      }\n\t\t\t@keyframes ega-loading--style2 {\n\t\t\t\t0% {\n\t\t\t\t\ttransform: rotate(0deg);\n\t\t\t\t}\n\n\t\t\t\t100% {\n\t\t\t\t\ttransform: rotate(360deg);\n\t\t\t\t}\n      }\n      .sm-trademark {\n        background-color: #a3bb39;\n        color: #fff;\n        font-size: 11px;\n        display: flex;\n        padding: 2px 0;\n        align-items: center;\n        justify-content: center;\n        margin-bottom: 5px;\n        margin-right: auto\n      }\n      .sm-trademark-logo {\n        flex: 0 0 16px;\n        height: 16px;\n        background-color: #fff;\n        max-width: 16px;\n        border-radius: 50%;\n        text-align: center;\n        line-height: 12px;\n        margin-right: 5px;\n      }\n      .sm-trademark-img {\n        height: 12px;\n        width: 12px;\n      }\n      .ega-smartsearch-heading {\n        padding: 5px 10px;\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n      }\n      .ega-smartsearch-heading strong {\n        font-size: 16px;\n      }\n      .ega-smartsearch-search-type {\n        display: flex;\n      }\n      .ega-smartsearch-search-type-item {\n        background-color: #e6e6e6;\n        padding: 6px 16px;\n        border-radius: 999px;\n        cursor: pointer;\n      }\n      .ega-smartsearch-search-type-item + .ega-smartsearch-search-type-item {\n        margin-left: 8px;\n      }\n      .ega-smartsearch-search-type-item.active {\n        background-color: var(--primary-color, #ff0000);\n        color: #fff;\n      }\n      .ega-smartsearch-results {\n        display: none;\n      }\n      .ega-smartsearch-results.active {\n        display: block;\n      }\n      @media screen and (max-width: 991px) {\n        #ega-smartsearch-search-suggestion {\n          width: var(--search-input-width);\n        }\n      }\n      @media screen and (max-width: 767px) {\n        #ega-smartsearch-search-suggestion {\n          width: 100%;\n          right: 5px!important;\n\t\t\t\t\tleft: 5px;\n        }\n\t\t\t\t.ega-smartsearch-item__description {\n\t\t\t\t\tfont-size: 12px;\n\t\t\t\t}\n      }\n      @media screen and (max-width: 375px) {\n        #ega-smartsearch-search-top {\n          max-height: 45vh;\n        }\n      }\n    `,i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",o.styleSheet?o.styleSheet.cssText=r:o.appendChild(document.createTextNode(r)),i.appendChild(o)},function(t,n,e){"use strict";e.r(n);e(2);var r=e(0),i=e.n(r);var o=function(){this.isArray=t=>"[object Array]"===Object.prototype.toString.call(t),this.createEle=t=>{if(!this.isArray(t))return this.createEle.call(this,Array.prototype.slice.call(arguments));let n=t[0],e=t[1],r=document.createElement(n),i=1;if("object"==typeof e&&null!==e&&!this.isArray(e)){for(let t in e)r[t]=e[t];i=2}for(let n=i;n<t.length;n++)this.isArray(t[n])?r.appendChild(this.createEle(t[n])):r.appendChild(document.createTextNode(t[n]));return r}};let s="";"undefined"!=typeof Haravan&&(s="haravan"),"undefined"!=typeof Bizweb&&(s="sapo");let a=EGASmartSearchConfigs.settings.productSortby;if("haravan"===s&&"all"===EGASmartSearchConfigs.settings.searchAccuracy)switch(EGASmartSearchConfigs.settings.productSortby){case"&sortby=title:product=asc":a="&sortby=title:product=asc";break;case"&sortby=title:product=desc":a="&sortby=title:product=desc";break;case"&sortby=price:product=asc":a="&sortby=price:product=asc";break;case"&sortby=price:product=desc":a="&sortby=price:product=desc";break;case"&sortby=created_at:product=desc":a="&sortby=created_at:product=desc";break;case"&sortby=created_at:product=asc":a="&sortby=created_at:product=asc";break;default:a=""}let u="product";let c=!1,h=!1;const l=t=>{let n=document.getElementById("ega-smartsearch-product-results"),e=document.getElementById("ega-smartsearch-article-results");document.querySelectorAll(".ega-smartsearch-search-type-item").forEach(t=>t.classList.remove("active")),t.classList.add("active"),u=t.dataType;const r=f.searchBottom.getElementsByClassName("ega-smartsearch__show-more")[0].href+"&active_tab="+u;f.searchBottom.getElementsByClassName("ega-smartsearch__show-more")[0].href=r;for(let t=0;t<f.searchForm.length;t++){f.searchForm[t].addEventListener("submit",(function(t){t.preventDefault(),location.href=r}))}"product"===t.dataType?(n.classList.add("active"),e.classList.remove("active")):(n.classList.remove("active"),e.classList.add("active"))};let p=t=>{let n=document.getElementById("ega-smartsearch-product-results"),e=document.getElementById("ega-smartsearch-article-results");document.querySelectorAll(".ega-smartsearch-search-view-item").forEach(t=>t.classList.remove("active")),t.classList.add("active"),"grid"===t.dataView?(e.classList.add("ega-smartsearch-grid"),n.classList.add("ega-smartsearch-grid")):(e.classList.remove("ega-smartsearch-grid"),n.classList.remove("ega-smartsearch-grid"))};(()=>{let t=(new o).createEle(["div",{id:"ega-smartsearch-search-suggestion"},["div",{id:"ega-smartsearch-search-header"},["span",{className:"ega-smartsearch-search-title"},EGASmartSearchConfigs.CONSTANT.textHeaderSectionTitle,["span"]],["div",{className:"ega-smartsearch-search-view-item",dataView:"list"},["span",{className:"ega-smartsearch-search-icon-list"}],["span",{className:"ega-smartsearch-search-icon-list"}],["span",{className:"ega-smartsearch-search-icon-list"}]],["div",{className:"ega-smartsearch-search-view-item",dataView:"grid"},["span",{className:"ega-smartsearch-search-icon-grid"}],["span",{className:"ega-smartsearch-search-icon-grid"}],["span",{className:"ega-smartsearch-search-icon-grid"}]]],["div",{className:"ega-smartsearch-heading"},["strong",{},"Hiển thị kết quả theo:"],["div",{className:"ega-smartsearch-search-type"},["span",{className:"ega-smartsearch-search-type-item product active",dataType:"product"},EGASmartSearchConfigs.CONSTANT.textProductSectionTitle],["span",{className:"ega-smartsearch-search-type-item article",dataType:"article"},EGASmartSearchConfigs.CONSTANT.textArticleSectionTitle]]],["div",{id:"ega-smartsearch-search-top"},["div",{id:"ega-smartsearch-product-results",className:"ega-smartsearch-results active"}],["div",{id:"ega-smartsearch-article-results",className:"ega-smartsearch-results"}],["div",{id:"ega-spinner"},["div"],["div"]]],["div",{id:"ega-smartsearch-search-bottom"},["a",{className:"ega-smartsearch__show-more",href:"#"},EGASmartSearchConfigs.CONSTANT.textShowAll,["span"]]]]);document.getElementsByTagName("BODY")[0].appendChild(t)})();let f={suggestionWrap:document.getElementById("ega-smartsearch-search-suggestion"),searchHeader:document.getElementById("ega-smartsearch-search-header"),searchView:document.getElementsByClassName("ega-smartsearch-search-view-item"),searchType:document.getElementsByClassName("ega-smartsearch-search-type-item"),searchTop:document.getElementById("ega-smartsearch-search-top"),productResults:document.getElementById("ega-smartsearch-product-results"),articleResults:document.getElementById("ega-smartsearch-article-results"),spinner:document.getElementById("ega-spinner"),searchBottom:document.getElementById("ega-smartsearch-search-bottom"),searchForm:document.querySelectorAll('form[action="/search"]:not(.js-not-smartsearch)')};new function(t,n){const e=n.settings,r=n.CONSTANT,u=new o,f=this;this.getPos=t=>({x:t.getBoundingClientRect().x,y:t.getBoundingClientRect().y}),this.initSuggestion=n=>{let e=window.innerWidth,r=this.getPos(n),i=n.offsetHeight,o=n.offsetWidth,s=e-(r.x+o),a=r.y+i;t.suggestionWrap.style.right=s+"px",t.suggestionWrap.style.top=a+"px",window.innerWidth<=768&&(t.suggestionWrap.style.minWidth=o+"px",t.suggestionWrap.style.setProperty("--search-input-width",o+"px"))},this.loadResult=(n,i)=>{"product"===i&&(t.productResults.innerHTML=""),"article"===i&&(t.articleResults.innerHTML="");let o=parseInt(e.articleLimit),s=parseInt(e.productLimit),a=e.displayProductDescription,l=e.displayArticleDescription;if(void 0!==n.results){let e=[];if(t.searchTop.style.display="block","product"===i){t.productResults.innerHTML="",s=Math.min(n.results.length,s);for(let t=0;t<s;t++)e[t]=n.results[t];c=e.length>0}else{t.articleResults.innerHTML="",o=Math.min(n.results.length,o);for(let t=0;t<o;t++)e[t]=n.results[t];h=e.length>0}let p=document.createElement("ul");e.length>0?e.map((t,n)=>{let e="",o="";"product"==i?(e=t.price_from?["div",{className:"ega-smartsearch-item__price"},["span",r.textFrom],["ins",t.price_from]]:["div",{className:"ega-smartsearch-item__price"},["ins",t.price]],void 0!==t.compare_at_price&&e.push(["del",t.compare_at_price]),!0!==a&&"true"!==a||(o=["div",{className:"ega-smartsearch-item__description"},t.description])):!0!==l&&"true"!==l||(o=["div",{className:"ega-smartsearch-item__description"},t.content]);let s=u.createEle(["li",["a",{href:t.url},["div",{className:"ega-smartsearch-item__image"},["img",{src:t.thumbnail}]],["div",{className:"ega-smartsearch-item__detail"},["h4",{className:"ega-smartsearch-item__title"},t.title],o,e]]]);p.appendChild(s)}):p=u.createEle(["span",{className:"ega-smartsearch-item__notfound"},r.notFound]),"product"===i?t.productResults.appendChild(p):t.articleResults.appendChild(p);let f=document.getElementById("ega-smartsearch-search-bottom");f.style.display=c||h?"block":"none"}},this.callAjax=(t,n)=>{let i=(t=>{switch(e.searchAccuracy){case"title":if("haravan"===s)return`${r.shopDomain}/search?type=product&q=${t}&view=${r.searchView}${a}`;case"all":if("haravan"===s)return`${r.shopDomain}/search?q=filter=((title:product**${t})||(title:product adjacent ${t})||(titlespace:product contains ${t})||(sku:product**${t})||(body:product**${t}))&view=${r.searchView}${a}`;default:if("haravan"===s)return`${r.shopDomain}/search?type=product&q=${t}&view=${r.searchView}${a}`;if("sapo"===s)return`${r.shopDomain}/search?type=product&query=${t}&view=${r.searchView}${a}`}})(t);return"article"===n&&(i=(t=>"haravan"===s?`${r.shopDomain}/search?type=article&q=${t}&view=${r.searchView}`:"sapo"===s?`${r.shopDomain}/search?type=article&query=${t}&view=${r.searchView}`:void 0)(t)),new Promise((t,n)=>{let e=new XMLHttpRequest;e.open("GET",i,!0),e.send(),e.onreadystatechange=()=>{if(4===e.readyState)if(200===e.status){let n=e.responseText,r=JSON.parse(n);t(r)}else n(e.status)}})},this.loadAjax=t=>{let n;if(""!==t)return n=!0===e.displayArticle||"true"===e.displayArticle?f.callAjax(t,"product").then(n=>(f.loadResult(n,"product"),f.callAjax(t,"article").then(t=>{f.loadResult(t,"article")}))):f.callAjax(t,"product").then(t=>{f.loadResult(t,"product")}),i.a.fromPromise(n)},this.start=()=>{if(t.searchForm.length>0&&window.egaSmartSearchValid)for(let n=0;n<t.searchForm.length;n++){let r=t.searchForm[n];r.addEventListener("submit",(function(t){t.preventDefault()}));let o=r.querySelector("[name=q], [name=query]");i.a.fromEvent(o,"keyup").debounce(300).map(n=>{let i=n.target.value;if(""===i||null===i)t.suggestionWrap.style.display="none",document.body.classList.remove("modal-open","ega-smartsearch__ohidden");else{document.getElementById("ega-spinner").style.display="block";let n=t.searchHeader.getElementsByClassName("ega-smartsearch-search-title")[0],o=t.searchBottom.getElementsByClassName("ega-smartsearch__show-more")[0],u="";e.displayArticle?("haravan"===s&&(u=`/search?type=product,article&q=${i}${a}`),"sapo"===s&&(u=`/search?type=product,article&query=${i}${a}`)):("haravan"===s&&(u="all"===e.searchAccuracy?`/search?q=filter=((title:product**${i})||(title:product adjacent ${i})||(titlespace:product contains ${i})||(sku:product**${i})||(body:product**${i}))${a}`:`/search?type=product&q=${i}${a}`),"sapo"===s&&(u=`/search?type=product&query=${i}${a}`)),o.setAttribute("href",u),o.querySelector("span").innerHTML=i,n.querySelector("span").innerHTML=`"${i}"`,r.addEventListener("submit",(function(t){t.preventDefault(),location.href=u})),document.body.classList.add("modal-open","ega-smartsearch__ohidden"),t.suggestionWrap.style.display="block"}return f.initSuggestion(n.target),n.target.value}).flatMapLatest(this.loadAjax).onValue(()=>{document.getElementById("ega-spinner").style.display="none"}),o.addEventListener("click",n=>{n.target.value.length>0&&(n.stopPropagation(),document.body.classList.add("modal-open","ega-smartsearch__ohidden"),f.initSuggestion(n.target),t.suggestionWrap.style.display="block")})}for(let n of t.searchView)n.addEventListener("click",t=>{t.stopPropagation(),p(n)}),n.dataView===e.searchView&&p(n);if(!0===e.displayArticle||"true"===e.displayArticle)for(const n of t.searchType)n.addEventListener("click",t=>{t.stopPropagation(),l(n)});else document.querySelector(".ega-smartsearch-search-type-item.article").style.display="none";window.addEventListener("click",()=>{t.suggestionWrap.style.display="none",document.body.classList.remove("modal-open","ega-smartsearch__ohidden")})}}(f,EGASmartSearchConfigs).start(),function(){const t=new URLSearchParams(location.search);if(t){if("product,article"===t.get("type")&&EGASmartSearchConfigs.settings.displayArticle&&$("#search-result").length){$("#search-result").css("display","flex");let n="q";"sapo"===s&&(n="query");let e=t.get("active_tab")||"product",r=t.get(n),i=t.get("page")||1;const o=(t,r,o)=>{e=t,i=o;let u=`/search?type=${e}&${n}=${r}&page=${o}&view=ega.smartsearch-result${a}`;"haravan"===s&&"all"===EGASmartSearchConfigs.settings.searchAccuracy&&"product"===e&&(u=`/search?q=filter=((title:product**${r})||(title:product adjacent ${r})||(titlespace:product contains ${r})||(sku:product**${r})||(body:product**${r}))&view=ega.smartsearch-result`),$.get(u,(function(e){e&&""!==e.trim()&&($("#search-result").html(e),window.history.pushState("","",`/search?type=product,article&active_tab=${t}&${n}=${r}&page=${o}`),$("html").animate({scrollTop:$("#search-result").offset().top-150},500))}))},u=t=>{e=t,i=1,$(".search-type-tabs .tab-link").removeClass("current"),$(`.search-type-tabs .tab-link[data-tab=${t}]`).addClass("current"),o(t,r,i)};o(e,r,i),u(e),$(document).on("click",".search-type-tabs .tab-link",(function(t){t.preventDefault();const n=t.target.dataset.tab;u(n)})),$(document).on("click",".pagination .page-item:not(.disabled) .page-link",(function(t){t.preventDefault();const n=t.target.dataset.page;o(e,r,n)})),$(".search-type-tabs").css("display","flex")}else $(".search-type-tabs").css("display","none")}}()}]);